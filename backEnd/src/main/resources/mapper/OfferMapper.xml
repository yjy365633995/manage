<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.nari.mapper.OfferMapper">
  <insert id="insertOffer" parameterType="org.nari.model.Offer">
    insert into offer
    values (
        #{offerId},#{biddingId}, #{turn},#{companyId},
        #{price},#{dayNum},#{deliveryDate},#{remark},
        #{priceRanking},#{qualityRanking},#{serviceRanking},
        #{priceScore},#{qualityScore},#{serviceScore},#{totalScore},
        #{winningTheBid},#{isEvaluation},#{visible}
    )
  </insert>

  <select id="getOfferById" parameterType="java.lang.String" resultType="org.nari.model.Offer">
    select *from offer
        where offer_id = #{offerId}
  </select>
  <select id="getOffersByBiddingId" parameterType="java.lang.String" resultType="org.nari.model.Offer">
    select *from offer
        where bidding_id = #{biddingId}
  </select>
  <select id="getOffersByUserId" parameterType="java.lang.String" resultType="org.nari.model.Offer">
    select *from offer
        where company_id = #{companyId}
  </select>
  <select id="getAll" resultType="org.nari.model.Offer">
    select *from offer
  </select>

  <update id="updateOfferById" parameterType="org.nari.model.Offer">
    update offer
    <set>
      <if test="biddingId!=null and biddingId!=''">bidding_id = #{biddingId},</if>
      <if test="turn!=null">turn = #{turn},</if>
      <if test="companyId!=null and company_id!=''">company_id = #{companyId},</if>
      <if test="price!=null">price = #{price},</if>
      <if test="dayNum!=null">day_num = #{dayNum},</if>
      <if test="deliveryDate!=null">delivery_date = #{deliveryDate},</if>
      <if test="remark!=null and remark!=''">remark = #{remark},</if>
      <if test="priceRanking!=null">price_ranking = #{priceRanking},</if>
      <if test="qualityRanking!=null">quality_ranking = #{qualityRanking},</if>
      <if test="serviceRanking!=null">service_ranking = #{serviceRanking},</if>
      <if test="priceScore!=null">price_score = #{priceScore},</if>
      <if test="qualityScore!=null">quality_score = #{qualityScore},</if>
      <if test="serviceScore!=null">service_score = #{serviceScore},</if>
      <if test="totalScore!=null">total_score = #{totalScore},</if>
      <if test="winningTheBid!=null">winning_the_bid = #{winningTheBid},</if>
      <if test="isEvaluation!=null">is_evaluation = #{isEvaluation},</if>
      <if test="visible!=null">visible = #{visible}</if>
    </set>
    where offer_id = #{offerId}
  </update>

  <delete id="deleteOfferById" parameterType="java.lang.String">
    delete from offer where
        offer_id = #{offerId}
  </delete>
</mapper>